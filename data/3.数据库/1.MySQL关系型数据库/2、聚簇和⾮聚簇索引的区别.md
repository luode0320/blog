# 聚簇和⾮聚簇索引的区别

### 聚簇索引（Clustered Index）

- **定义**：聚簇索引决定数据文件本身的物理排序和位置。在InnoDB存储引擎中，聚簇索引实际上就是主键索引。这意味着表中的行数据按照主键的顺序存储。
- **影响**：因为行数据与主键一起存储，所以访问主键索引非常快。此外，如果查询涉及到范围查询或者排序，聚簇索引会很有用，因为它可以按顺序访问数据。
- **存储**：在InnoDB中，表数据是与主键一起存储的，所以聚簇索引的开销相对较小。

### 非聚簇索引（Nonclustered Index）

- **定义**：非聚簇索引与数据本身分开存储，每个非聚簇索引包含一个指向实际数据行的指针。在MySQL的InnoDB存储引擎中，这样的索引称为二级索引或辅助索引,
  除了主键索引之外的其他索引都是非聚簇索引。
- **影响**：当通过非聚簇索引访问数据时，可能需要一次额外的查找操作（Index lookup），从索引页跳转/回表到实际的数据页。这被称为一次“随机I/O”，可能会增加访问延迟。
- **存储**：非聚簇索引独立于数据存储，因此在创建非聚簇索引时不会改变表数据的物理顺序。

### MySQL中的情况

- **InnoDB**：默认情况下，InnoDB使用聚簇索引存储数据。如果定义了主键，则主键就是聚簇索引。如果没有显式定义主键，InnoDB会选择一个唯一非空的索引作为聚簇索引，如果没有这样的索引，则InnoDB会自动创建一个隐藏的主键。
- **MyISAM**：MyISAM引擎不支持聚簇索引，所有的索引都是非聚簇索引。这意味着即使主键索引也只是一个指向实际数据文件中行的指针。