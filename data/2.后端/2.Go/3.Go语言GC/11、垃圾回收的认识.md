# 简介

Go 语言的垃圾回收机制是一种自动内存管理机制，它负责检测不再使用的内存，并将其重新标记为可用空间，以供后续的内存分配使用。

Go 的垃圾回收器采用的是并发标记-清除算法（Concurrent Mark-Sweep, CMS），并且随着时间的发展不断优化改进。

# 垃圾回收机制

## 并发性

- Go 的垃圾回收器是并发运行的，这意味着它可以与应用程序的其他部分同时运行，减少了垃圾回收带来的暂停时间。
- 这种并发性有助于保持程序的响应性和吞吐量。

## 标记-清除算法

- 标记阶段
    - 使用三色标记法来标记所有可达的对象。
    - 标记阶段会跟踪从根集（如全局变量、栈中的局部变量等）开始可达的所有对象。
- 清除阶段
    - 清除阶段会释放那些未被标记的对象所占用的空间。

## 增量标记

- 为了进一步减少暂停时间，Go 的垃圾回收器采用了增量标记技术，即在多个短暂的时间间隔内完成整个标记过程。
- 这种技术允许标记过程在多个短暂的暂停之间进行，而不是一次性长时间暂停。

## 对象扫描

- Go 的垃圾回收器会对对象进行扫描，以识别并清理不再使用的对象。
- 扫描过程帮助垃圾回收器确定哪些对象已经不再可达，以便安全地回收它们。

## 内存分配器

- Go 的内存分配器负责分配和回收小对象，它使用多种策略来提高效率，例如使用 span 和 mcache 等结构。
- 这些策略有助于减少内存分配的开销，提高程序的性能。

# 总结

Go 语言的垃圾回收机制采用了一系列先进的技术和算法，旨在提供高性能的内存管理。通过并发性、增量标记等特性

Go的垃圾回收器能够在保持程序响应性的同时，高效地管理内存资源。