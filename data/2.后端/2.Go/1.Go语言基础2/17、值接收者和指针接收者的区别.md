# 简介

在 Go 语言中，值接收者和指针接收者是用于定义结构体方法接收者类型的不同方式，它们决定了方法如何访问和修改接收者的数据。

|              | 值接收者                                                     | 指针接收者                                                   |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 值类型调用   | 方法会使用调用者的一个副本，类似于“传值”                     | 使用值的引用来调用方法，上例中，`qcrao.growUp()` 实际上是 `(&qcrao).growUp()` |
| 指针类型调用 | 指针被解引用为值，上例中，`stefno.howOld()` 实际上是 `(*stefno).howOld()` | 实际上也是“传值”，方法里的操作会影响到调用者，类似于指针传参，拷贝了一份指针 |

# 总结

总结而言，选择值接收者还是指针接收者取决于你的方法是否需要修改接收者状态，以及是否希望避免不必要的数据复制。



# 值接收者

- 当你定义一个方法时，如果接收者是值类型，那么在调用该方法时，**接收者会被复制**。
- 方法内部对这个复制的对象所做的**任何修改都不会影响**到原始的接收者。
- 这种接收者类型适合于不修改接收者状态的方法，或者当修改一个副本就足够时。
- 如果接收者是较大的结构体或包含大量数据的类型，**复制可能会带来性能开销**。



# 指针接收者

- 相比之下，如果接收者是指针类型，那么在调用方法时，传递的是**接收者的地址**。
- 方法**可以直接通过这个地址**访问和修改原始接收者。
- 这种接收者类型适用于需要修改接收者状态的方法，或者当避免复制大型结构体时。
- 使用指针接收者可以提高性能，尤其是在处理大对象时，因为**不需要复制数据**。



# 示例

```go
package main

// Person 结构体
type Person struct {
	Name string
	Age  int
}

// 值接收者方法 celebrateBirthday
func (p Person) celebrateBirthday1() {
	p.Age++ // 不改变传过来的参数本身
}

// 指针接收者定义 celebrateBirthday 方法
func (p *Person) celebrateBirthday2() {
	p.Age++ // 改变传过来的参数本身
}

func main() {
	// 调用值方法,不改变传过来的参数本身
	person := Person{"Alice", 30}
	person.celebrateBirthday1() // person.Age 仍然是 30

	// 调用指针方法, 改变传过来的参数本身
	person = Person{"Alice", 30}
	person.celebrateBirthday2() // 现在 person.Age 是 31
}
```

